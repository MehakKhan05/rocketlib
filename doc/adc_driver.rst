ADC Driver
**********

ADC Function
============

Initialization
--------------
.. code-block:: c

	void adc_init(uint8_t pin);

| Initialize ADC on the specified pin and setup FVR (Fixed voltage reference).
| Parameters:
| - **pin**, pin/ADC number, if ADC is shared between pins, then the ADC mapping need to be configured in :code:`pin_init()` function

Get single conversion
---------------------
.. code-block:: c

	uint16_t adc_get_single_conversion(uint8_t pin);

| Get single conversion from ADC
| Parameters:
| - **pin**, pin/ADC number

Current Sensing Function
========================

Current sense Get Conversion
----------------------------
.. code-block:: c

	uint16_t curr_sense_single_conversion(uint8_t pin, uint16_t shunt_r, uint16_t amp_gain);

| Get single conversion from a current sense amplifier(such as INA180) connected to an ADC
| Parameters:
| - **pin**, pin/ADC number
| - **shunt_r**, shunt resistor value, in kilo-ohms
| - **amp_gain**, gain of the current sense amplifier, in V/V
	
Reference Implementation
========================
An ADC driver for PIC18 exists in the Charging Board firmware repository, `Link <https://github.com/waterloo-rocketry/cansw_charging/blob/master/mcc_generated_files/adcc.c>`_. The driver was generated by MPLab's MCC Code Generator.
